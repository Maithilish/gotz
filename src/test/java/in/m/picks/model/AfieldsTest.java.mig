package in.m.picks.model;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertNotSame;
import static org.junit.Assert.assertNull;
import static org.junit.Assert.assertSame;
import static org.junit.Assert.assertTrue;

import org.junit.Test;

public class AfieldsTest {

	@Test
	public void testAfields() {
		Field afield = new Field("tname", "tvalue");

		Fields afields = new Fields();
		afields.addAfield(afield);

		Fields afieldsCopy = new Fields(afields);

		assertNotNull(afieldsCopy.getAfields());
		assertEquals(1, afieldsCopy.getAfields().size());

		assertNotSame(afields, afieldsCopy);
		assertTrue(afields.equals(afieldsCopy) && afieldsCopy.equals(afields));

		Field afieldCopy = afieldsCopy.getAfield("tname");
		assertNotSame(afield, afieldCopy);
		assertTrue(afield.equals(afieldCopy) && afieldCopy.equals(afield));
	}

	@Test
	public void testFields() {
		Fields afields = new Fields();
		assertNotNull(afields.getAfields());
		assertEquals(0, afields.getAfields().size());
	}

	@Test
	public void testGetField() {
		Field af = new Field("tname", "tvalue");
		Fields afields = new Fields();
		afields.addAfield(af);

		Field result = afields.getAfield("tname");
		assertSame(af, result);
		assertEquals(af, result);
	}

	@Test
	public void testGetAfieldsByGroup() {
		Field query1 = new Field("tname1", "tvalue1");
		query1.setGroup("query");
		Field query2 = new Field("tname2", "tvalue2");
		query2.setGroup("query");
		Field script1 = new Field("tname3", "tvalue3");
		script1.setGroup("script");

		Fields afields = new Fields();
		afields.addAfield(query1);
		afields.addAfield(query2);
		afields.addAfield(script1);

		Fields queries = afields.getAfieldsByGroup("query");
		assertEquals(2, queries.size());
		assertTrue(queries.getAfields().contains(query1));
		assertTrue(queries.getAfields().contains(query2));

		Fields scripts = afields.getAfieldsByGroup("script");
		assertEquals(1, scripts.size());
		assertTrue(scripts.getAfields().contains(script1));

		Fields xyz = afields.getAfieldsByGroup("xyz");
		assertEquals(0, xyz.size());
	}

	@Test
	public void testGetAfieldsByGroupNull() {
		Field other1 = new Field("tname4", "tvalue4"); // group null

		Fields afields = new Fields();
		afields.addAfield(other1);

		Fields others = afields.getAfieldsByGroup(null);
		assertEquals(others.size(), 1);
		assertTrue(others.getAfields().contains(other1));
	}

	@Test
	public void testGetAfieldsByName() {
		Field query1 = new Field("tname1", "tvalue1");
		query1.setGroup("query");
		Field query2 = new Field("tname2", "tvalue2");
		query2.setGroup("query");
		Field script1 = new Field("tname3", "tvalue3");
		script1.setGroup("script");

		Fields afields = new Fields();
		afields.addAfield(query1);
		afields.addAfield(query2);
		afields.addAfield(script1);

		Fields queries = afields.getAfieldsByName("tname2");
		assertEquals(1, queries.size());
		assertTrue(queries.getAfields().contains(query2));

		Fields scripts = afields.getAfieldsByName("tname3");
		assertEquals(1, scripts.size());
		assertTrue(scripts.getAfields().contains(script1));

		Fields xyz = afields.getAfieldsByGroup("xyz");
		assertEquals(0, xyz.size());

	}

	@Test
	public void testGetFieldNull() {
		Fields afields = new Fields();
		assertNull(afields.getAfield("xyz"));
	}

	@Test
	public void testAddField() {
		Fields afields = new Fields();
		assertEquals(0, afields.getAfields().size());

		Field af = new Field("tname", "tvalue");
		afields.addAfield(af);
		assertEquals(1, afields.getAfields().size());
		assertTrue(afields.getAfields().contains(af));

		Field afWithNewValue = new Field("tname", "new value");
		afields.addAfield(afWithNewValue);
		assertFalse(afields.getAfields().contains(af));
		assertTrue(afields.getAfields().contains(afWithNewValue));
	}

	@Test
	public void testEqualsObject() {
		Fields afs = new Fields();
		Field af = new Field("tname", "tvalue");
		afs.addAfield(af);

		Fields afsCopy = new Fields();
		Field afCopy = new Field("tname", "tvalue");
		afsCopy.addAfield(afCopy);

		assertTrue(afs != afsCopy);
		assertTrue(afs.equals(afsCopy) && afsCopy.equals(afs));
		assertTrue(afs.hashCode() == afsCopy.hashCode());
	}

	@Test
	public void testHashCode() {
		Fields afields = new Fields();
		assertEquals(32, afields.hashCode());

		Field af = new Field("tname", "tvalue");
		afields.addAfield(af);
		assertEquals(-1693638872, afields.hashCode());
	}

}
