package org.codetab.gotz.shared;

import static org.junit.Assert.assertEquals;
import org.codetab.gotz.exception.FieldNotFoundException;
import org.codetab.gotz.model.Field;
import org.codetab.gotz.model.Locator;
import org.codetab.gotz.util.AccessUtil;

import org.junit.Before;
import org.junit.Test;

public class AccessUtilTest {

	private Locator locator;
	private Field afield;

	@Before
	public void setup() {
		locator = new Locator();
		afield = new Field();
		afield.setName("testkey");
	}

	@Test
	public void testGetStringValue() throws FieldNotFoundException {
		afield.setValue("testvalue");
		locator.addAfield(afield);
		String value = AccessUtil.getStringValue(locator, "testkey");
		assertEquals("testvalue", value);
	}

	@Test(expected = FieldNotFoundException.class)
	public void testGetStringValueNotFoundException() throws FieldNotFoundException {
		AccessUtil.getStringValue(locator, "testkey");
	}

	@Test
	public void testGetIntValue() throws FieldNotFoundException {
		afield.setValue("1");
		locator.addAfield(afield);
		int value = AccessUtil.getIntValue(locator, "testkey");
		assertEquals(1, value);
	}

	@Test(expected = NumberFormatException.class)
	public void testGetIntValueFormatException() throws FieldNotFoundException {
		afield.setValue("one");
		locator.addAfield(afield);
		AccessUtil.getIntValue(locator, "testkey");
	}

	@Test(expected = FieldNotFoundException.class)
	public void testGetIntValueNotFoundException() throws FieldNotFoundException {
		AccessUtil.getIntValue(locator, "testkey");
	}

	@Test
	public void testUpdateField() throws FieldNotFoundException {
		afield.setValue("before value");
		locator.addAfield(afield);

		String value = AccessUtil.getStringValue(locator, "testkey");
		assertEquals("before value", value);

		AccessUtil.updateAfield(locator, "testkey", "after value");
		value = AccessUtil.getStringValue(locator, "testkey");
		assertEquals("after value", value);
	}

	@Test(expected = FieldNotFoundException.class)
	public void testUpdateFieldNotFoundException() throws FieldNotFoundException {
		AccessUtil.updateAfield(locator, "testkey", "after value");
	}

}
